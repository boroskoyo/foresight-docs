---
title: Optimize workflow duration
slug: /configuration/optimize-workflow-duration
sidebar_position: 1
---

## Using Layers
Integrating Frogate using AWS Lambda Layers is the recommended (and easier) way to get started with Frogate. 
Depending on whether or not you choose to use a custom runtime, you can integrate Frogate with no code changes 
at all or just by wrapping your handler function.

### Step 1 - Deploy Your Function to AWS Lambda
Bundle all your Node.js Lambda function files and any additional required packages, and then upload it to the 
AWS Lambda console using the **Upload a.zip file** option for the code entry type.
Note that Frogate dependencies are not expected to be in the artifact to be uploaded, as they 
come with a layer that will be utilized at a later point.

### Step 2 - Configure Your Function
Add Thundra's Node.js layer to your Lambda function using the ARN below. Note that the ARN contains a region and a 
version parameter which you will need to set. Set the region value to your Lambda function's region and the version 
value to the layer version you want to use with your Lambda function.

```js
arn:aws:lambda:${region}:269863060030:layer:thundra-lambda-node-layer-minified:${version}
```

:::note

Latest  ![Thundra Node Layer](https://img.shields.io/endpoint.svg?url=https://thundra-layer-nodejs-hbxafac868au.runkit.sh) 

:::


After the Thundra layer ARN has been added, you can continue using a custom runtime or continue without using a
custom runtime. Regardless of what you choose, make sure to also set the THUNDRA_APIKEY environment variable to 
the API key you get from the Thundra console.

### Step 3: Configure Handler
You should only use one (either auto or manual) of the options below, not both of them!

#### a. Auto wrap
Set the handler to ```thundra_handler.wrapper``` and then set the ```THUNDRA_AGENT_LAMBDA_HANDLER``` environment variable 
value to your original handler (e.g., ```index.handler```).

#### b. Manual wrap
You can wrap your Lambda handler to integrate Thundra as shown below.

```jsx title="index.js"
const thundra = require("@thundra/core")();

exports.handler = thundra((event, context,callback) => {
    callback(null, "Hello Thundra!");
});
```

:::note

In the example above, the required @thundra/core package is already available in Thundra's Node.js layer, which we already added. Thus, you don't need to install the package and bundle it with your Lambda function.

:::

### Step 4: Invoke Your Function

Now you can try to invoke your Lambda function and see the details of your invocation in the Thundra console!


## Without Layers